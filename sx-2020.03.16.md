# 半圆笔记 2020.03.16（Linux 文件与目录管理）
## 下午授课的内容文件重定向
### 标准输入，标准输出和错误输出
- 标准输入0 默认是键盘
- 标准输出1 默认是屏幕
- 错误输出2 默认是屏幕  
上面的0，1，2时文件描述符的ID 

|符号|含义|示例|  
|:--:|:--|:--|  
|>|标准输出重定向到文件，文件不存在会自动创建文件并写入，文件存在会删除原文件内容并写入|echo "ABCD" > 1.txt|
|>>|标准输出追加到文件，文件不存在会自动创建文件并写入，文件存在会追加内容原文件|echo "EFGH" >> 1.txt|  
|2>|错误输出重定向到文件|cat not-exist-file 2 > 1.txt|  
|2>&1|错误输出重定向到标准输出|ls -la not-exist-file 1.txt > 1.txt 2>&1|  

### find  
### xargs 
暂时用法不太理解 找到几篇明天可以看一下  
[find 1](https://www.cnblogs.com/brian-linux/p/10774406.html)  
[find 2](https://www.jianshu.com/p/ea8cc2248022)  
[xargs 1](https://www.cnblogs.com/ftl1012/p/9250438.html)  
[xargs 2](https://www.jianshu.com/p/7cde8f1952f8)  
[xargs 3](https://blog.51cto.com/qiangsh/1868476)  


## 目录与路径
### 1. 相对路径与绝对路径：
  - 绝对路径：路径的写法一定由根目录/写起。
  - 相对路径：相对于当前工作目录的路径。

 #### 1.1 相对路径的用途
  &emsp;&emsp;避免了冗长的目录写法，方便部分情况下的工作；
 #### 1.2 绝对路径的用途
  &emsp;&emsp;绝对路径的正确度比较好，不会因为运行的工作环境不同，导致程序问题的发生。
### 2. 目录的相关操作
需要记住以下目录：
> . 代表当前目录  
> .. 代表上一层目录  
> \- 代表前一个工作目录  
> ~ 代表目前使用者身份所在的家目录  
> ~ \*** 代表***这个使用者的家目录

&emsp;&emsp;在所有的目录底下都会存在的两个目录【.】【..】代表此层与上一层目录  
&emsp;&emsp;根目录的上一层目录和根目录自己是同一个目录 。  

**底下是常见的处理目录的命令：**
- cd：变换目录  
- pwd: 显示当前的目录  
- mkdir: 创建一个新的目录  
- rmdir: 删除一个***空的***目录  

#### 2.1 (cd) 变换目录
&emsp;&emsp;cd是Change Directory的缩写，是用来变换工作目录的命令。注意，目录名称与cd命令之间存在着一个空格。同时需要记住以上几个特殊目录的用法和涵义。
#### 2.2 (pwd) 显示目前所在的目录
&emsp;&emsp;pwd是Print Working Directory 的缩写，也就是显示目前所在目录的命令。-P参数可以显示出确实的路径，而非连接档的路径。
#### 2.3 (mkdir) 创建新目录 
&emsp;&emsp;mkdir是make diectory的缩写。-p 参数可以直接将所需要的目录一起创建，但是要避免输入错误，可用tab键；-m 参数可以在创建目录的时候配置权限。
#### 2.4 (rmdir) 删除空的目录
&emsp;&emsp;使用rmdir仅能删除空的目录，使用rm -r可以删除目录及内的所有文件，但是要慎用，因为无法找回。
### 关于运行档路径的变量:$PATH
&emsp;&emsp;echo $PATH可以显示出当前的环境变量。这个变量的内容由一堆目录所组成的，每个目录中间用冒号来：隔开。在我们输入一个命令后，系统会搜索当前用户PATH定义的目录下是否有该命令，如果有则可以被运行，如果没有则不能被运行。  
&emsp;&emsp;用以下命令可以将指定目录加入到PATH下：
`PATH="$PATH":/****`  
 &emsp;&emsp;**需要知道的几点**  
&emsp;&emsp; 1.  不同身份使用者默认的PATH不同，默认能够随意运行的命令也不同(如root与vbird)；  
&emsp;&emsp; 2.  PATH是可以修改的，所以一般使用者还是可以透过修改PATH来运行某些位於/sbin或/usr/sbin下的命令来查询；  
&emsp;&emsp; 3.  使用绝对路径或相对路径直接指定某个命令的档名来运行，会比搜寻PATH来的正确；  
&emsp;&emsp; 4.  命令应该要放置到正确的目录下，运行才会比较方便；  
&emsp;&emsp; 5.  本目录(.)最好不要放到PATH当中。 
## 文件与目录管理
### 1. 文件与目录的检视:ls
```
[root@www ~]# ls [-aAdfFhilnrRSt] 目录名称
[root@www ~]# ls [--color={never,auto,always}] 目录名称
[root@www ~]# ls [--full-time] 目录名称
选项与参数：
-a  ：全部的文件，连同隐藏档( 开头为 . 的文件) 一起列出来(常用)
-A  ：全部的文件，连同隐藏档，但不包括 . 与 .. 这两个目录
-d  ：仅列出目录本身，而不是列出目录内的文件数据(常用)
-f  ：直接列出结果，而不进行排序 (ls 默认会以档名排序！)
-F  ：根据文件、目录等资讯，给予附加数据结构，例如：
      *:代表可运行档； /:代表目录； =:代表 socket 文件； |:代表 FIFO 文件；
-h  ：将文件容量以人类较易读的方式(例如 GB, KB 等等)列出来；
-i  ：列出 inode 号码，inode 的意义下一章将会介绍；
-l  ：长数据串列出，包含文件的属性与权限等等数据；(常用)
-n  ：列出 UID 与 GID 而非使用者与群组的名称 (UID与GID会在帐号管理提到！)
-r  ：将排序结果反向输出，例如：原本档名由小到大，反向则为由大到小；
-R  ：连同子目录内容一起列出来，等於该目录下的所有文件都会显示出来；
-S  ：以文件容量大小排序，而不是用档名排序；
-t  ：依时间排序，而不是用档名。
--color=never  ：不要依据文件特性给予颜色显示；
--color=always ：显示颜色
--color=auto   ：让系统自行依据配置来判断是否给予颜色
--full-time    ：以完整时间模式 (包含年、月、日、时、分) 输出
--time={atime,ctime} ：输出 access 时间或改变权限属性时间 (ctime) 
而非内容变更时间 (modification time)
```
### 2. 复制、删除与移动：cp，rm，mv
#### 2.1 cp(复制文件或目录)
```
[root@www ~]# cp [-adfilprsu] 来源档(source) 目标档(destination)
[root@www ~]# cp [options] source1 source2 source3 .... directory
选项与参数：
-a  ：相当於 -pdr 的意思，将文件所有的特性拷贝，创建时间等等；(常用)
-d  ：若来源档为连结档的属性(link file)，则复制连结档属性而非文件本身；
-f  ：为强制(force)的意思，若目标文件已经存在且无法开启，则移除后再尝试一次；
-i  ：若目标档(destination)已经存在时，在覆盖时会先询问动作的进行(常用)
-l  ：进行硬式连结(hard link)的连结档创建，而非复制文件本身；
-p  ：连同文件的属性一起复制过去，而非使用默认属性(备份常用)；
-r  ：递回持续复制，用於目录的复制行为；(常用)
-s  ：复制成为符号连结档 (symbolic link)，亦即『捷径』文件；
-u  ：若 destination 比 source 旧才升级 destination ！
最后需要注意的，如果来源档有两个以上，则最后一个目的档一定要是『目录』才行！
```
cp有种种文件属性与权限的特性，所以，在复制时，需要了解到：
>是否需要完整的保留来源文件的资讯？  
>来源文件是否为连结档 (symbolic link file)？  
>来源档是否为特殊的文件，例如 FIFO, socket 等？  
>来源档是否为目录？  

#### 2.2 rm(移除文件或目录)
```
[root@www ~]# rm [-fir] 文件或目录
选项与参数：
-f  ：就是 force 的意思，忽略不存在的文件，不会出现警告信息；
-i  ：互动模式，在删除前会询问使用者是否动作
-r  ：递回删除啊！最常用在目录的删除了！
```
#### 2.3 mv(移动文件与目录，或更名)
```
[root@www ~]# mv [-fiu] source destination
[root@www ~]# mv [options] source1 source2 source3 .... directory
选项与参数：
-f  ：force 强制的意思，如果目标文件已经存在，不会询问而直接覆盖；
-i  ：若目标文件 (destination) 已经存在时，就会询问是否覆盖！
-u  ：若目标文件已经存在，且 source 比较新，才会升级 (update)
```
> 注意：如果有多个文档和目录，最后的一个一定是目录，就是将前面所有的文档和目录移动到最后的里面去。
rename命令可以进行重命名的操作，可以试一试。

#### 2.4 取得路径的文件名称与目录名称
- basename 取得最后的档名
- dirname 取得目录名

一二节的内容很多且很重要，需要反复阅读、理解，跟着操作
附链接[Linux 文件与目录管理](http://cn.linux.vbird.org/linux_basic/0220filemanager.php)